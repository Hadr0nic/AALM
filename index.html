<!DOCTYPE html>
<html>
<head>
    <title>Real-Time Events</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h2>Real-Time Event Rate</h2>
<canvas id="chart"></canvas>

<script>
const ws = new WebSocket("ws://localhost:8000/ws/events");

const ctx = document.getElementById("chart").getContext("2d");
const chart = new Chart(ctx, {
    type: "line",
    data: {
        labels: [],
        datasets: [{
            label: "Events",
            data: [],
            borderColor: "blue"
        }]
    }
});

ws.onmessage = (msg) => {
    const events = JSON.parse(msg.data);
    events.forEach(e => {
        chart.data.labels.push(new Date(e.timestamp * 1000).toLocaleTimeString());
        chart.data.datasets[0].data.push(e.value);
    });
    chart.update();
};
</script>
</body>
</html>
